{% extends 'base.html' %}

<script>
    {% block jquery %}
        $(".item-quantity").change(function () {
            $(this).next(".btn-update").show();
        });
    {% endblock %}
</script>

{% block content %}
    <table class="table">
        {% for cart_item in object.cartitem_set.all %}
            <form action="." method="GET">
                <tr>
                    <td>{{ cart_item.item.get_title }}</td>
                    <input type="hidden" name="item" value="{{ cart_item.item.id }}"/>
                    <td><input type="number" class="item-quantity" name="quantity" value="{{ cart_item.quantity }}"/>
                        <input type="submit" class="btn btn-info btn-update" value="Update Item" style="display: none;">
                    </td>
                    <td>{{ cart_item.line_item_total}}</td>
                    <td class="text-right"><a href="{{ cart_item.remove }}" title="Remove Item"><i
                            class="fa fa-remove delete-item"></i></a>

                    </td>
            </form>
            </tr>
        {% endfor %}
    <tr>
        <td colspan="4" class="text-right">Subtotal: {{ object.subtotal }}</td>
    </tr>
    </table>
{% endblock %}
